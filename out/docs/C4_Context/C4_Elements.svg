<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="799px" preserveAspectRatio="none" style="width:731px;height:799px;" version="1.1" viewBox="0 0 731 799" width="731px" zoomAndPan="magnify"><defs/><g><!--cluster read_side--><rect fill="#FFFFFF" height="464" style="stroke: #444444; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;" width="459" x="14" y="324"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="80" x="203.5" y="339.5352">«boundary»</text><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="204" y="357.957">Read Side</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="217" y="372.9336">[System]</text><!--cluster write_side--><rect fill="#FFFFFF" height="464" style="stroke: #444444; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;" width="204" x="510" y="324"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="80" x="572" y="339.5352">«boundary»</text><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="80" x="572" y="357.957">Write Side</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="585.5" y="372.9336">[System]</text><!--entity read_model_db--><path d="M96.5,681 C96.5,671 182,671 182,671 C182,671 267.5,671 267.5,681 L267.5,770.0859 C267.5,780.0859 182,780.0859 182,780.0859 C182,780.0859 96.5,780.0859 96.5,770.0859 L96.5,681 " fill="#438DD5" style="stroke: #3C7FC0; stroke-width: 1.5;"/><path d="M96.5,681 C96.5,691 182,691 182,691 C182,691 267.5,691 267.5,681 " fill="none" style="stroke: #3C7FC0; stroke-width: 1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="149.5" y="706.6016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="95" x="134.5" y="724.6016">Read Model</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="57" x="153.5" y="739.5781">[Postgres]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="184" y="755.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="151" x="106.5" y="772.1328">Stores the read model</text><!--entity read_model_api--><rect fill="#438DD5" height="133.0625" style="stroke: #3C7FC0; stroke-width: 1.5;" width="208" x="22" y="384"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="93.5" y="405.6016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="85.5" y="423.6016">Query API</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="49" x="101.5" y="438.5781">[Hasura]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="128" y="454.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="184" x="32" y="471.1328">Provides a GraphQL API for</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="173" x="37.5" y="487.6211">querying the read model,</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="160" x="46" y="504.1094">including subscriptions</text><!--entity projection--><rect fill="#438DD5" height="116.5742" style="stroke: #3C7FC0; stroke-width: 1.5;" width="199" x="265.5" y="392"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="332.5" y="413.6016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="144" x="293" y="431.6016">Projection Service</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="340" y="446.5781">[Haskell]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="367" y="462.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="175" x="275.5" y="479.1328">Listens to new events and</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="163" x="283.5" y="495.6211">updates the read model</text><!--entity event_store--><path d="M518.5,681 C518.5,671 602,671 602,671 C602,671 685.5,671 685.5,681 L685.5,770.0859 C685.5,780.0859 602,780.0859 602,780.0859 C602,780.0859 518.5,780.0859 518.5,770.0859 L518.5,681 " fill="#438DD5" style="stroke: #3C7FC0; stroke-width: 1.5;"/><path d="M518.5,681 C518.5,691 602,691 602,691 C602,691 685.5,691 685.5,681 " fill="none" style="stroke: #3C7FC0; stroke-width: 1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="569.5" y="706.6016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="91" x="556.5" y="724.6016">Event Store</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="57" x="573.5" y="739.5781">[Postgres]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="604" y="755.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="147" x="528.5" y="772.1328">Stores domain events</text><!--entity cmd_api--><rect fill="#438DD5" height="133.0625" style="stroke: #3C7FC0; stroke-width: 1.5;" width="187" x="518.5" y="384"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="579.5" y="405.6016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="116" x="554" y="423.6016">Command API</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="98" x="563" y="438.5781">[Haskell/Servant]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="614" y="454.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="163" x="528.5" y="471.1328">HTTP/JSON API exposes</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="131" x="544.5" y="487.6211">endpoints for write</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="575" y="504.1094">operations</text><!--entity user--><rect fill="#08427B" height="52.9766" style="stroke: #073B6F; stroke-width: 1.5;" width="72" x="332" y="8"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="52" x="342" y="29.6016">«person»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="37" x="349.5" y="47.6016">User</text><!--entity web_app--><rect fill="#438DD5" height="116.5742" style="stroke: #3C7FC0; stroke-width: 1.5;" width="219" x="258.5" y="138"/><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="65" x="335.5" y="159.6016">«container»</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="159" x="288.5" y="177.6016">Web Application/UI</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="29" x="353.5" y="192.5781">[Elm]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="370" y="208.6445"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="199" x="268.5" y="225.1328">Responsive user interface for</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="190" x="273" y="241.6211">playing or observing games</text><!--link user to web_app--><path d="M368,61.251 C368,80.632 368,107.6817 368,132.5013 " fill="none" id="user-&gt;web_app" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="368,137.7602,372,128.7602,368,132.7602,364,128.7602,368,137.7602" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="369" y="104.5684">Uses</text><!--link web_app to read_model_api--><path d="M312.1765,255.0917 C276.7476,292.2773 230.6928,340.6159 193.2536,379.9115 " fill="none" id="web_app-&gt;read_model_api" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="189.658,383.6854,198.7621,379.9284,193.1069,380.0653,192.97,374.4101,189.658,383.6854" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="316.5" y="298.5684">Uses</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="97" x="284" y="312.9121">[GraphQL/HTTP]</text><!--link web_app to cmd_api--><path d="M424.2849,255.0917 C460.0066,292.2773 506.442,340.6159 544.1905,379.9115 " fill="none" id="web_app-&gt;cmd_api" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="547.8159,383.6854,544.4655,374.4239,544.352,380.0796,538.6963,379.9662,547.8159,383.6854" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="504" y="298.5684">Uses</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="74" x="483" y="312.9121">[HTTP/JSON]</text><!--link read_model_api to read_model_db--><path d="M123.6576,517.1633 C123.9916,546.0202 126.2095,579.9922 133,610 C137.2406,628.7394 144.3762,648.2774 151.9084,665.8389 " fill="none" id="read_model_api-&gt;read_model_db" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="154.0413,670.7374,154.1157,660.8888,152.0452,666.1531,146.7809,664.0826,154.0413,670.7374" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="134" y="599.0684">Reads from</text><!--link cmd_api to event_store--><path d="M609.5793,517.0698 C607.9351,562.2837 605.7786,621.5884 604.1864,665.3735 " fill="none" id="cmd_api-&gt;event_store" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="603.9951,670.6342,608.3195,661.7855,604.1768,665.6375,600.3248,661.4948,603.9951,670.6342" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="608" y="591.5684">Reads from and</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58" x="634.5" y="606.8789">writes to</text><!--link projection to event_store--><path d="M415.5518,509.1571 C455.617,555.6463 511.3343,620.2972 551.4097,666.7981 " fill="none" id="projection-&gt;event_store" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="554.7517,670.676,551.9061,661.2472,551.4875,666.8885,545.8462,666.4699,554.7517,670.676" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="510" y="591.5684">Listens to</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="83" x="503" y="606.8789">notifications</text><!--link projection to read_model_db--><path d="M325.9664,509.1571 C295.1541,555.4596 252.353,619.7782 221.4368,666.237 " fill="none" id="projection-&gt;read_model_db" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="218.4828,670.676,226.799,665.3996,221.2529,666.5135,220.139,660.9674,218.4828,670.676" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="281" y="591.5684">Reads from and</text><text fill="#666666" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58" x="307.5" y="606.8789">writes to</text><!--
@startuml C4_Elements





skinparam defaultTextAlignment center

skinparam wrapWidth 200
skinparam maxMessageSize 150

skinparam rectangle {
    StereotypeFontSize 12
    shadowing false
}

skinparam database {
    StereotypeFontSize 12
    shadowing false
}

skinparam Arrow {
    Color #666666
    FontColor #666666
    FontSize 12
}

skinparam rectangle<<boundary>> {
    Shadowing false
    StereotypeFontSize 0
    FontColor #444444
    BorderColor #444444
    BorderStyle dashed
}






















skinparam rectangle<<person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #08427B
    BorderColor #073B6F
}

skinparam rectangle<<external_person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #686868
    BorderColor #8A8A8A
}

skinparam rectangle<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam rectangle<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}

skinparam database<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam database<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}
















skinparam rectangle<<container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}

skinparam database<<container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}








top to bottom direction

rectangle "==User" <<person>> as user

rectangle "==Web Application/UI\n//<size:12>[Elm]</size>//\n\n Responsive user interface for playing or observing games" <<container>> as web_app

rectangle "==Read Side\n<size:12>[System]</size>" <<boundary>> as read_side {
  database "==Read Model\n//<size:12>[Postgres]</size>//\n\n Stores the read model" <<container>> as read_model_db
  rectangle "==Query API\n//<size:12>[Hasura]</size>//\n\n Provides a GraphQL API for querying the read model, including subscriptions" <<container>> as read_model_api
  rectangle "==Projection Service\n//<size:12>[Haskell]</size>//\n\n Listens to new events and updates the read model" <<container>> as projection
}

rectangle "==Write Side\n<size:12>[System]</size>" <<boundary>> as write_side {
  database "==Event Store\n//<size:12>[Postgres]</size>//\n\n Stores domain events" <<container>> as event_store
  rectangle "==Command API\n//<size:12>[Haskell/Servant]</size>//\n\n HTTP/JSON API exposes endpoints for write operations" <<container>> as cmd_api
}

user - -> web_app : "===Uses"

web_app - -> read_model_api : "===Uses\n//<size:12>[GraphQL/HTTP]</size>//"
web_app - -> cmd_api : "===Uses\n//<size:12>[HTTP/JSON]</size>//"

read_model_api - -> read_model_db : "===Reads from"
cmd_api - -> event_store : "===Reads from and writes to"

projection - -> event_store : "===Listens to notifications"
projection - -> read_model_db : "===Reads from and writes to"

@enduml

PlantUML version 1.2019.09(Mon Aug 26 18:19:51 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-b03
Operating System: Mac OS X
OS Version: 10.15.2
Default Encoding: UTF-8
Language: en
Country: DE
--></g></svg>